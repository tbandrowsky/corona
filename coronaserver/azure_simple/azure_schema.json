{
  "schema_name": "AzureSimple",
  "schema_description": "Ak - Azure Kentucky Lightweight Azure Parody",
  "schema_version": "1.1",
  "schema_authors": [
    "Generated by GitHub Copilot"
  ],
  "classes": [
    {
      "class_name": "ak_object",
      "base_class_name": "sys_object",
      "class_description": "Azure Object",
      "full_text": [ "display_name", "tags" ],
      "fields": {
        "display_name": "string",
        "tags": "object"
      }
    },
    {
      "class_name": "ak_subscription",
      "base_class_name": "ak_object",
      "class_description": "AzureSimple Subscription",
      "full_text": [ "subscription_id", "tenant_id", "owner_user" ],
      "fields": {
        "subscription_id": "string",
        "tenant_id": "string",
        "owner_user": "string",
        "resource_groups": "[ ak_resource_group ]"
      }
    },
    {
      "class_name": "ak_resource_group",
      "base_class_name": "ak_object",
      "class_description": "Resource Group (owned by a subscription)",
      "parents": [
        "ak_subscription"
      ],
      "full_text": [ "resource_group_name", "region", "ower_user", "tags" ],
      "fields": {
        "resource_group_name": "string",
        "region": "string",
        "owner_user": "string",
        "tags": "object",
        "virtual_machines": "[ ak_virtual_machine ]",
        "firewalls": "[ ak_firewall ]",
        "storages": "[ ak_storage_account ]",
        "function_apps": "[ ak_function_app ]",
        "database_servers": "[ ak_database_server ]"
      }
    },
    {
      "class_name": "ak_virtual_machine",
      "base_class_name": "ak_object",
      "class_description": "Virtual Machine instance",
      "full_text": [ "vm_name", "resource_group", "subscription_id", "vm_size", "os_type", "os_version", "private_ip", "public_ip", "tags" ],
      "parents": [
        "ak_resource_group"
      ],
      "fields": {
        "vm_name": "string",
        "resource_group": "ak_resource_group",
        "subscription_id": "string",
        "vm_size": "string",
        "os_type": "string",
        "os_version": "string",
        "private_ip": "string",
        "public_ip": "string",
        "vm_state": "string",
        "disks": "[ ak_disk ]",
        "nics": "[ ak_network_interface ]",
        "tags": "object"
      }
    },
    {
      "class_name": "ak_disk",
      "base_class_name": "ak_object",
      "class_description": "Disk attached to a VM",
      "full_text": [ "disk_name", "size_gb", "sku", "managed", "tags" ],
      "parents": [
        "ak_virtual_machine"
      ],
      "fields": {
        "disk_name": "string",
        "size_gb": "int64",
        "sku": "string",
        "managed": "string",
        "tags": "object"
      }
    },
    {
      "class_name": "ak_network_interface",
      "base_class_name": "ak_object",
      "class_description": "Network Interface attached to VM",
      "full_text": [ "nic_name", "private_ip", "public_ip", "subnet", "tags" ],
      "parents": [
        "ak_virtual_machine"
      ],
      "fields": {
        "nic_name": "string",
        "private_ip": "string",
        "public_ip": "string",
        "subnet": "string"
      }
    },
    {
      "class_name": "ak_firewall",
      "base_class_name": "ak_object",
      "class_description": "Firewall / Network Security resource",
      "full_text": [ "firewall_name", "private_ip", "public_ip", "sku" ],
      "parents": [
        "ak_resource_group"
      ],
      "fields": {
        "firewall_name": "string",
        "sku": "string",
        "private_ip": "string",
        "public_ip": "string",
        "rules": "[ ak_firewall_rule ]"
      }
    },
    {
      "class_name": "ak_firewall_rule",
      "base_class_name": "ak_object",
      "class_description": "Firewall rule",
      "full_text": [ "rule_name", "priority", "action", "source_addresses", "destination_addresses" ],
      "parents": [
        "ak_firewall"
      ],
      "fields": {
        "rule_name": "string",
        "priority": "int64",
        "action": "string",
        "source_addresses": "[ string ]",
        "destination_addresses": "[ string ]",
        "protocols": "[ string ]",
        "destination_ports": "[ string ]"
      }
    },
    {
      "class_name": "ak_storage_account",
      "base_class_name": "ak_object",
      "class_description": "Storage Account",
      "full_text": [ "account_name", "sku", "kind" ],
      "parents": [
        "ak_resource_group"
      ],
      "fields": {
        "account_name": "string",
        "sku": "string",
        "kind": "string",
        "access_tier": "string",
        "containers": "[ ak_storage_container ]"
      }
    },
    {
      "class_name": "ak_storage_container",
      "base_class_name": "ak_object",
      "class_description": "Storage container (blob) inside a storage account",
      "full_text": [ "container_name" ],
      "parents": [
        "ak_storage_account"
      ],
      "fields": {
        "container_name": "string",
        "public_access": "string"
      }
    },
    {
      "class_name": "ak_function_app",
      "base_class_name": "ak_object",
      "class_description": "Function App (serverless)",
      "parents": [
        "ak_resource_group"
      ],
      "full_text": [ "app_name", "runtime", "runtime_version", "app_settings" ],
      "fields": {
        "app_name": "string",
        "runtime": "string",
        "runtime_version": "string",
        "triggers": "[ ak_function_trigger ]",
        "app_settings": "object"
      }
    },
    {
      "class_name": "ak_function_trigger",
      "base_class_name": "ak_object",
      "class_description": "Function trigger definition",
      "parents": [
        "ak_function_app"
      ],
      "full_text": [ "trigger_name", "app", "direction", "metadata" ],
      "fields": {
        "trigger_name": "string",
        "app": "ak_function_app",
        "type": "string",
        "direction": "string",
        "auth_level": "string",
        "metadata": "object"
      }
    },
    {
      "class_name": "ak_database_server",
      "base_class_name": "ak_object",
      "class_description": "Managed Database Server (MySQL/Postgres/SQLServer)",
      "parents": [
        "ak_resource_group"
      ],
      "full_text": [ "server_name", "engine", "fqdn", "databases" ],
      "fields": {
        "server_name": "string",
        "engine": "string",
        "engine_version": "string",
        "fqdn": "string",
        "admin_user": "string",
        "databases": "[ ak_database ]",
        "tags": "object"
      },
      "indexes": {
        "db_server_idx": { "index_keys": [ "server_name" ] }
      }
    },
    {
      "class_name": "ak_database",
      "base_class_name": "ak_object",
      "class_description": "A database hosted on a database server",
      "parents": [
        "ak_database_server"
      ],
      "full_text": [ "database_name" ],
      "fields": {
        "database_name": "string",
        "charset": "string",
        "collation": "string",
        "size_mb": "int64"
      }
    }
  ],
  "users": [],
  "datasets": [
    {
      "dataset_name": "Azure Teams",
      "dataset_description": "Teams and their default memberships",
      "dataset_version": "1.1",
      "dataset_author": "Todd Bandrowsky",
      "dataset_source": "This is canonical",
      "objects": [
        {
          "class_name": "sys_team",
          "team_name": "Azure Customers",
          "team_description": "Customers From Azure",
          "team_domain": ".*",
          "inventory_classes": [],
          "allowed_teams": [ "Azure Customers", "Azure Operators" ],
          "permissions": [
            {
              "class_name": "sys_grant",
              "grant_classes": [ "ak_object" ],
              "get": "own",
              "put": "own",
              "delete": "own",
              "alter": "own"
            }
          ]
        },
        {
          "class_name": "sys_team",
          "team_name": "Azure Operators",
          "team_description": "Azure Operators",
          "team_domain": "microsoft.com",
          "inventory_classes": [],
          "allowed_teams": [ "Azure Customers", "Azure Operators" ],
          "permissions": [
            {
              "class_name": "sys_grant",
              "grant_classes": [ "ak_object" ],
              "get": "any",
              "put": "any",
              "delete": "any",
              "alter": "any"
            }
          ]
        }
      ]
    },
    {
      "dataset_name": "Azure Example",
      "dataset_description": "Example subscription with a resource group, VM, firewall, storage, function app and DB server.",
      "dataset_version": "1.0",
      "dataset_author": "Generated by GitHub Copilot",
      "objects": [
        {

        },
        {
          "class_name": "ak_subscription",
          "subscription_id": "sub-0001",
          "display_name": "Demo Subscription",
          "tenant_id": "tenant-0001",
          "owner_user": "demo@local",
          "tags": {
            "environment": "dev",
            "owner": "demo"
          },
          "resource_groups": [
            {
              "class_name": "ak_resource_group",
              "resource_group_name": "rg-demo-01",
              "subscription_id": "sub-0001",
              "region": "eastus",
              "owner_user": "demo@local",
              "tags": { "purpose": "demo" },
              "virtual_machines": [
                {
                  "class_name": "ak_virtual_machine",
                  "vm_name": "vm-demo-01",
                  "vm_size": "Standard_DS1_v2",
                  "os_type": "Linux",
                  "os_version": "Ubuntu 22.04",
                  "private_ip": "10.0.0.4",
                  "public_ip": "52.160.1.10",
                  "vm_state": "running",
                  "disks": [
                    {
                      "class_name": "ak_disk",
                      "disk_name": "vm-demo-01-osdisk",
                      "size_gb": 128,
                      "sku": "Premium_LRS",
                      "managed": true
                    }
                  ],
                  "nics": [
                    {
                      "class_name": "ak_network_interface",
                      "nic_name": "nic-vm-demo-01",
                      "private_ip": "10.0.0.4",
                      "public_ip": "52.160.1.10",
                      "subnet": "subnet-demo"
                    }
                  ],
                  "tags": { "role": "app" }
                }
              ],
              "firewalls": [
                {
                  "class_name": "ak_firewall",
                  "firewall_name": "fw-demo-01",
                  "sku": "AZFW_VNet",
                  "private_ip": "10.0.1.4",
                  "public_ip": "52.160.2.20",
                  "rules": [
                    {
                      "class_name": "ak_firewall_rule",
                      "rule_name": "allow-ssh",
                      "priority": 100,
                      "action": "allow",
                      "source_addresses": [ "0.0.0.0/0" ],
                      "destination_addresses": [ "10.0.0.4" ],
                      "protocols": [ "Tcp" ],
                      "destination_ports": [ "22" ]
                    }
                  ],
                  "tags": { "role": "perimeter" }
                }
              ],
              "storages": [
                {
                  "class_name": "ak_storage_account",
                  "account_name": "stgdemodemo",
                  "sku": "Standard_LRS",
                  "kind": "StorageV2",
                  "access_tier": "Hot",
                  "containers": [
                    {
                      "class_name": "ak_storage_container",
                      "container_name": "app-data",
                      "public_access": "None"
                    }
                  ],
                  "tags": { "purpose": "blobs" }
                }
              ],
              "function_apps": [
                {
                  "class_name": "ak_function_app",
                  "app_name": "fn-demo-01",
                  "runtime": "dotnet",
                  "runtime_version": "6.0",
                  "triggers": [
                    {
                      "class_name": "ak_function_trigger",
                      "trigger_name": "httpTrigger",
                      "type": "httpTrigger",
                      "direction": "in",
                      "auth_level": "function"
                    }
                  ],
                  "app_settings": { "WEBSITE_RUN_FROM_PACKAGE": "1" }
                }
              ],
              "database_servers": [
                {
                  "class_name": "ak_database_server",
                  "server_name": "db-demo-01",
                  "engine": "postgres",
                  "engine_version": "14",
                  "fqdn": "db-demo-01.postgres.database.azure.com",
                  "admin_user": "adminuser",
                  "databases": [
                    {
                      "class_name": "ak_database",
                      "database_name": "appdb",
                      "charset": "utf8",
                      "collation": "utf8_general_ci",
                      "size_mb": 2048
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}