{
  "schema_name": "Politics",
  "schema_description": "Schema for Politics.",
  "schema_version": "1.0",
  "schema_authors": [
    "TJ Bandrowsky"
  ],
  "classes": [
    {
      "class_name": "political_object",
      "base_class_name": "sys_object",
      "class_description": "A root object to which all things are imported",
      "fields": {
      }
    },
    {
      "class_name": "candidate",
      "class_description": "Candidates",
      "base_class_name": "political_object",
      "class_color": "#af9d66",
      "class_author": "TJ Bandrowsky",
      "class_version": "1.0",
      "card_title": "full_name",
      "card_fields": [ "political_party", "city", "state" ],
      "grid_template_rows": "60px auto",
      "grid_template_columns": "250px 250px 250px",
      "fields": {
        "full_name": {
          "field_type": "string",
          "grid-row": "1",
          "grid-column": "1",
          "label": "Full Name"
        },
        "candidate_id": {
          "field_type": "string",
          "grid-row": "2",
          "grid-column": "1",
          "label": "Candidate ID"
        },
        "political_party": {
          "field_type": "string",
          "grid-row": "2",
          "grid-column": "2",
          "label": "Political Party"
        },
        "election_year": {
          "field_type": "string",
          "grid-row": "2",
          "grid-column": "3",
          "label": "Election Year"
        },
        "street1": {
          "field_type": "string",
          "grid-row": "3",
          "grid-column": "1",
          "label": "Street1"
        },
        "street2": {
          "field_type": "string",
          "grid-row": "4",
          "grid-column": "1",
          "label": "Street2"
        },
        "city": {
          "field_type": "string",
          "grid-row": "5",
          "grid-column": "1",
          "label": "City"
        },
        "state": {
          "field_type": "string",
          "grid-row": "5",
          "grid-column": "2",
          "label": "State"
        },
        "zip": {
          "field_type": "string",
          "grid-row": "5",
          "grid-column": "3",
          "label": "Zip"
        },
        "donors": {
          "field_type": "query",
          "query": {
            "from": [
              {
                "class_name": "committee_candidate",
                "name": "donors",
                "filter": {
                  "candidate_id": "$this.candidate_id"
                },
                "replace": [
                  {
                    "replace_with": "donor",
                    "join_by": {
                      "committee_id": "committee_id"
                    }
                  }
                ]
              }
            ],
            "stages": [
              {
                "class_name": "result",
                "input": "donors",
                "name": "donors"
              }
            ]
          }
        }
      },
      "indexes": {
        "candidate_candidate_id_idx": {
          "index_keys": [
            "candidate_id"
          ]
        }
      }
    },
    {
      "class_name": "committee",
      "class_description": "Committee",
      "base_class_name": "political_object",
      "class_color": "#af9d66",
      "full_text": [ "committee_name", "political_party", "committee_id" ],
      "class_author": "TJ Bandrowsky",
      "class_version": "1.0",
      "card_title": "committee_name",
      "card_fields": [ "political_party", "committee_id" ],
      "fields": {
        "committee_id": "string",
        "committee_name": "string",
        "political_party": "string",
        "candidates": {
          "field_type": "query",
          "query": {
            "from": [
              {
                "class_name": "committee_candidate",
                "name": "committee_candidate",
                "filter": {
                  "committee_id": "$this.committee_id"
                },
                "replace": [
                  {
                    "source_class": "candidate",
                    "target_field": "candidates",
                    "join": {
                      "candidate_id": "candidate_id"
                    }
                  }
                ]
              }
            ],
            "stages": [
              {
                "class_name": "result",
                "input": "candidate",
                "name": "candidates"
              }
            ]
          }
        },
        "donors": {
          "field_type": "query",
          "query": {
            "from": [
              {
                "class_name": "donor",
                "name": "donor",
                "filter": {
                  "committee_id": "$this.committee_id"
                }
              }
            ],
            "stages": [
              {
                "class_name": "result",
                "input": "donor",
                "name": "donors"
              }
            ]
          }
        }
      },
      "indexes": {
        "committee_committee_id_idx": {
          "index_keys": [
            "committee_id"
          ]
        }
      }
    },
    {
      "class_name": "committee_candidate",
      "class_description": "Candidate Committee Map",
      "base_class_name": "political_object",
      "class_color": "#af9d66",
      "class_author": "TJ Bandrowsky",
      "class_version": "1.0",
      "card_title": "commitee_id",
      "card_fields": [ "candidate_id" ],
      "fields": {
        "committee_id": "string",
        "candidate_id": "string"
      },
      "indexes": {
        "committee_candidate_committee_id_idx": {
          "index_keys": [
            "committee_id"
          ]
        },
        "committee_candidate_candidate_id_idx": {
          "index_keys": [
            "candidate_id"
          ]
        }
      }
    },
    {
      "class_name": "donation",
      "class_description": "Political Donation",
      "base_class_name": "sys_object",
      "class_color": "#af9d66",
      "class_author": "TJ Bandrowsky",
      "class_version": "1.0",
      "card_title": "full_name",
      "card_fields": [ "city", "committee_id", "transaction_date", "transaction_amount" ],
      "fields": {
        "committee_id": "string",
        "full_name": "string",
        "city": "string",
        "state": "string",
        "zip": "string",
        "employer": "string",
        "occupation": "string",
        "transaction_date": "datetime",
        "transaction_amount": "double",
        "memo": "string",
        "committees": {
          "field_type": "query",
          "query": {
            "from": [
              {
                "class_name": "committee",
                "name": "committee",
                "filter": {
                  "committee_id": "$this.committee_id"
                }
              }
            ],
            "stages": [
              {
                "class_name": "result",
                "input": "committee",
                "name": "committees"
              }
            ]
          }
        }
      },
      "indexes": {
        "donor_committee": {
          "index_keys": [
            "committee_id"
          ]
        },
        "donor_person_id": {
          "index_keys": [
            "full_name", "city", "state", "zip"
          ]
        }
      }
    }
  ],
  "users": [

  ],
  "datasets": [
    {
      "dataset_name": "Politics Teams",
      "dataset_description": "Teams and their default memberships",
      "dataset_version": "1.1",
      "dataset_author": "Todd Bandrowsky",
      "dataset_source": "This is canonical",
      "objects": [
        {
          "class_name": "sys_team",
          "team_name": "Politics Team",
          "team_description": "Local security for teams",
          "team_domain": ".*",
          "inventory_classes": [],
          "allowed_teams": [],
          "permissions": [
            {
              "class_name": "sys_grant",
              "grant_classes": [ "political_object" ],
              "get": "any",
              "put": "any",
              "delete": "any",
              "alter": "any"
            }
          ]
        }
      ]
    },
    {
      "dataset_name": "Candidate Master",
      "dataset_description": "Load Candidates",
      "dataset_version": "1.0",
      "dataset_author": "Federal Elections Commission",
      "dataset_source": "https://www.fec.gov/data/browse-data/?tab=bulk-data",
      "import": {
        "type": "csv",
        "delimiter": "|",
        "filename": "us_elections\\cn.csv",
        "target_class": "candidate",
        "column_map": {
          "0": "candidate_id",
          "1": "full_name",
          "2": "political_party",
          "3": "election_year",
          "10": "street1",
          "11": "street2",
          "12": "city",
          "13": "state",
          "14": "zip"
        }
      }
    },
    {
      "dataset_name": "Committee Master",
      "dataset_description": "Load Committees",
      "dataset_version": "1.0",
      "dataset_author": "Federal Elections Commission",
      "dataset_source": "https://www.fec.gov/data/browse-data/?tab=bulk-data",
      "import": {
        "type": "csv",
        "delimiter": "|",
        "filename": "us_elections\\cm.csv",
        "target_class": "committee",
        "column_map": {
          "0": "committee_id",
          "1": "committee_name",
          "10": "political_party",
          "13": "company_name"
        }
      }
    },
    {
      "dataset_name": "CommitteeCandidates Master",
      "dataset_description": "Map Committees and Candidates",
      "dataset_version": "1.0",
      "dataset_author": "Federal Elections Commission",
      "dataset_source": "https://www.fec.gov/data/browse-data/?tab=bulk-data",
      "import": {
        "type": "csv",
        "delimiter": "|",
        "filename": "us_elections\\ccl.csv",
        "target_class": "committee_candidate",
        "column_map": {
          "0": "candidate_id",
          "3": "committee_id"
        }
      }
    },
    {
      "dataset_name": "Donation Master",
      "dataset_description": "Load Donations",
      "dataset_version": "1.0",
      "dataset_author": "Federal Elections Commission",
      "dataset_source": "https://www.fec.gov/data/browse-data/?tab=bulk-data",
      "import": {
        "type": "csv",
        "delimiter": "|",
        "filename": "us_elections\\itcont.csv",
        "target_class": "donation",
        "column_map": {
          "0": "committee_id",
          "7": "full_name",
          "8": "city",
          "9": "state",
          "10": "zip",
          "11": "employer",
          "12": "occupation",
          "13": "transaction_date",
          "14": "transaction_amount",
          "19": "memo"
        }
      }
    }
  ]
}
